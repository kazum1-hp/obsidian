# 自增和自减变量

| 运算符  | 符号  | 使用形式 | 结果                 |
| ---- | --- | ---- | ------------------ |
| 前缀自增 | ++  | ++x  | x 加一，返回x           |
| 前缀自减 | --  | --x  | x 减一，返回x           |
| 后缀自增 | ++  | x++  | 拷贝x，x加一，**返回拷贝的值** |
| 后缀自减 | --  | x--  | 拷贝x，x减一，**返回拷贝的值** |
# 副作用与求值顺序问题

在许多情况下，C++也没有指定何时必须应用运算符的副作用。在应用了副作用的对象在同一语句中多次使用的情况下，这可能导致未定义的行为。

例如，表达式 `x++`,`++x`是未指定的行为。当x初始化为1时，Visual Studio和GCC将其计算为2+2，Clang将其计算为由1+2！这是由于编译器应用自增x的副作用时的差异所致。

即使C++标准确实明确了应该如何求值，但从历史上看，这是一个存在许多编译器错误的领域。确保在给定语句中，使用应用了副作用的变量不超过一次，通常可以避免所有这些问题。

> [!旁白] 
> C++标准故意不定义求值顺序，以便编译器可以对给定的体系结构执行任何最自然（因此也是最具性能的）的操作。
