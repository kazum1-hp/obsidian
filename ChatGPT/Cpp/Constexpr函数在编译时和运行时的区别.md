

这句话的意思其实在讨论 C++ 中 `constexpr` 函数的行为，尤其是它在编译时（编译器处理代码的时候）和运行时（程序实际运行的时候）的区别。让我们来逐步解读：

1. **constexpr 函数**：
   - `constexpr` 是 C++ 中引入的一个关键字，用于标记可以在编译时求值的函数或变量。它表示这个函数的返回值在编译阶段就可以被计算出来，而不是等到程序运行时才计算。

2. **编译时求值**：
   - 在某些场合（比如需要常量表达式的地方），编译器需要在编译时就计算出一个值。例如，数组的大小必须是一个编译时常量，不能是运行时计算出的值。

3. **什么时候会在编译时求值**：
   - 如果你在需要一个常量值的上下文中调用了一个 `constexpr` 函数（比如定义数组大小），那么这个函数会在编译时被计算。如果编译器能确定所有输入都是常量，它就能在编译时完成计算。
   - 例如：
     ```cpp
     constexpr int square(int x) {
         return x * x;
     }

     constexpr int size = square(4);  // 这个在编译时求值
     int array[size];  // 数组大小需要编译时确定
     ```

4. **运行时求值**：
   - 如果你在一个不需要常量表达式的上下文中使用 `constexpr` 函数（比如在普通的函数调用中），那么这个函数可以在运行时求值，而不是编译时。
   - 例如：
     ```cpp
     int x = 5;
     int y = square(x);  // 这个在运行时求值，因为 x 不是编译时常量
     ```

5. **总结这句话的意思**：
   - **“在需要常量表达式的地方使用返回值，则有资格在编译时计算的 constexpr 函数将仅在编译时求值。”**
     - 如果你在像数组大小这样的上下文中使用 `constexpr` 函数的返回值，编译器会在编译时求值。
   - **“否则，不能保证编译时计算。”**
     - 如果是在其他场合使用，则可能在运行时求值，而不是编译时。

换句话说，`constexpr` 函数只有在需要编译时常量的情况下**强制**在编译时求值，而在其他情况下则可以选择在运行时进行计算。这让 `constexpr` 函数更灵活。